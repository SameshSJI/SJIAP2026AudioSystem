<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SJIAP 2026 Audio System</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #e8f5e9; /* light green background */
    color: #1b5e20; /* dark green text */
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  .dark { 
    background: #1b5e20; 
    color: #e8f5e9; 
  }
  header {
    text-align: center;
    padding: 15px;
    background: #43a047; /* green header */
    color: white;
    font-size: 1.4em;
  }
  #playlist {
    flex: 1;
    list-style: none;
    padding: 0;
    margin: 10px;
    max-height: 350px;
    overflow-y: auto;
    background: #a5d6a7;
    border: 1px solid #388e3c;
    border-radius: 8px;
  }
  .track {
    padding: 10px;
    border-bottom: 1px solid #c8e6c9;
    cursor: pointer;
    transition: background 0.2s;
  }
  .track:hover { 
    background: #66bb6a; 
    color: white;
  }
  .current { 
    font-weight: bold; 
    background: #388e3c; 
    color: #e8f5e9; 
    padding: 4px 6px; 
    border-radius: 4px; 
  }
  #seek, #volume {
    width: 90%;
    margin: 10px auto;
    display: block;
  }
  #time, #volumeLabel {
    text-align: center;
    display: block;
    margin-bottom: 10px;
  }
  #controls {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    padding: 10px;
    background: #a5d6a7;
    border-top: 2px solid #388e3c;
    position: sticky;
    bottom: 0;
    z-index: 10;
  }
  button {
    padding: 8px 12px;
    font-size: 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background: #66bb6a;
    color: white;
    font-weight: bold;
    transition: background 0.2s;
  }
  button:hover { 
    background: #388e3c;
  }
  @media (max-width: 600px) {
    header { font-size: 1.1em; }
    button { flex: 1 1 45%; font-size: 13px; }
    #controls { gap: 5px; }
  }
</style>
</head>
<body>
<header>üéµ SJIAP 2026 Audio System üéµ</header>

<ul id="playlist"></ul>

<input type="range" id="seek" value="0" min="0" max="100">
<span id="time">0:00 / 0:00</span>

<input type="range" id="volume" min="0" max="1" step="0.01" value="1">
<span id="volumeLabel">Volume</span>

<div id="controls">
  <button id="prev">‚èÆÔ∏è Prev (‚Üê)</button>
  <button id="playPause">‚ñ∂Ô∏è Play (Space)</button>
  <button id="stop">‚èπÔ∏è Stop (S)</button>
  <button id="next">‚è≠Ô∏è Next (‚Üí)</button>
  <button id="repeat">Repeat: Off (R)</button>
  <button id="theme">‚òÄÔ∏è Light Mode (T)</button>
  <button id="muteUnmute">üîä Volume (M)</button>
</div>

<script>
// --- TRACKS SETUP ---
const baseURL = "./Audio/";
const trackFiles = [
  "0_Right_Marker_March_in.mp3",
  "1_Supporting_Contingent_March_in.mp3",
  "2_Commander_march_in_front.mp3",
  "3_Right_dressing.mp3",
  "4_School_Rally_GOH_march_in.mp3",
  "5_16_beat_drum_roll_GOH_Fan_out.mp3",
  "6_Right_dressing.mp3",
  "7_Fanfare_Arrival_of_Reviewing_Officer.mp3",
  "8_Salute_No7_Hormat_Reviewing_Officer.mp3",
  "9_Inspection_of_GOH.mp3",
  "10_Commander_march_in_front.mp3",
  "11_48_rolls.mp3",
  "12_TENTERA_SINGAPURA_March_Past.mp3",
  "12A_March_Past_2_Rally.mp3",
  "13_Commander_march_in_front.mp3",
  "14_Right_dressing.mp3",
  "15_Sunset_Flag_Lowering.mp3",
  "16_Auld_Lang_Syne.mp3"
];
const trackTitles = [
  "(0) Right Marker March in",
  "(1) Supporting Contingent March in",
  "(2) Commander march in front",
  "(3) Right dressing",
  "(4) School Rally (GOH march in)",
  "(5) 16 beat drum roll (GOH Fan out)",
  "(6) Right dressing",
  "(7) Fanfare (Arrival of Reviewing Officer)",
  "(8) Salute No.7 (Hormat Reviewing Officer)",
  "(9) Inspection of GOH",
  "(10) Commander march in front",
  "(11) 48 rolls",
  "(12) TENTERA SINGAPURA (March Past)",
  "(12A) March Past 2 (Rally)",
  "(13) Commander march in front",
  "(14) Right dressing",
  "(15) Sunset (Flag Lowering)",
  "(16) Auld Lang Syne"
];

// --- AUDIO OBJECTS ---
const tracks = trackFiles.map(file => {
  const audio = new Audio(baseURL + file);
  audio.preload = "auto";
  return audio;
});

let currentTrack = 0;
let repeatMode = "off";

const playlistEl = document.getElementById("playlist");
const seekEl = document.getElementById("seek");
const timeEl = document.getElementById("time");
const volumeEl = document.getElementById("volume");

// --- CREATE PLAYLIST ---
tracks.forEach((track, i) => {
  const li = document.createElement("li");
  li.textContent = trackTitles[i];
  li.classList.add("track");
  li.addEventListener("click", () => { playTrack(i); });
  playlistEl.appendChild(li);
});

function highlight() {
  document.querySelectorAll(".track").forEach((el, i) => {
    el.classList.toggle("current", i===currentTrack);
  });
}

function playTrack(i){
  tracks[currentTrack].pause();
  tracks[currentTrack].currentTime = 0;
  currentTrack = i;
  tracks[currentTrack].play();
  highlight();
  updatePlayPauseButton();
}

function togglePlayPause(){
  const audio = tracks[currentTrack];
  if(audio.paused) audio.play();
  else audio.pause();
  updatePlayPauseButton();
}

function updatePlayPauseButton(){
  const btn = document.getElementById("playPause");
  btn.textContent = tracks[currentTrack].paused ? "‚ñ∂Ô∏è Play (Space)" : "‚è∏Ô∏è Pause (Space)";
}

// --- CONTROLS ---
document.getElementById("playPause").onclick = togglePlayPause;
document.getElementById("stop").onclick = () => { 
  tracks[currentTrack].pause(); 
  tracks[currentTrack].currentTime=0; 
  updatePlayPauseButton(); 
};
document.getElementById("prev").onclick = () => { playTrack((currentTrack-1+tracks.length)%tracks.length); };
document.getElementById("next").onclick = () => { playTrack((currentTrack+1)%tracks.length); };

document.getElementById("repeat").onclick = function(){
  if(repeatMode==="off"){ repeatMode="single"; this.textContent="Repeat: Single (R)"; } 
  else if(repeatMode==="single"){ repeatMode="all"; this.textContent="Repeat: All (R)"; } 
  else { repeatMode="off"; this.textContent="Repeat: Off (R)"; }
};

document.getElementById("theme").onclick = function() {
  document.body.classList.toggle("dark");
  this.textContent = document.body.classList.contains("dark") ? "üåô Dark Mode (T)" : "‚òÄÔ∏è Light Mode (T)";
};

function updateTime(){
  const audio = tracks[currentTrack];
  if(audio.duration > 0){
    seekEl.value = (audio.currentTime/audio.duration)*100;
  }
  const minCur = Math.floor(audio.currentTime/60);
  const secCur = Math.floor(audio.currentTime%60).toString().padStart(2,"0");
  const minDur = Math.floor(audio.duration/60)||0;
  const secDur = Math.floor(audio.duration%60).toString().padStart(2,"0");
  timeEl.textContent = `${minCur}:${secCur} / ${minDur}:${secDur}`;
}
setInterval(updateTime,500);

seekEl.oninput = () => { 
  tracks[currentTrack].currentTime = (seekEl.value/100)*tracks[currentTrack].duration; 
};

volumeEl.oninput = () => tracks[currentTrack].volume = volumeEl.value;

function toggleMute(){
  tracks[currentTrack].muted = !tracks[currentTrack].muted;
  document.getElementById("muteUnmute").textContent = tracks[currentTrack].muted ? "üîá Muted (M)" : "üîä Volume (M)";
}
document.getElementById("muteUnmute").onclick = toggleMute;

tracks.forEach(track => {
  track.addEventListener("ended", () => {
    if(repeatMode==="single"){ playTrack(currentTrack); }
    else if(currentTrack<tracks.length-1){ playTrack(currentTrack+1); }
    else if(repeatMode==="all"){ playTrack(0); }
    updatePlayPauseButton();
  });
});

highlight();

document.addEventListener("keydown", (e) => {
  switch(e.key){
    case " ": togglePlayPause(); e.preventDefault(); break;
    case "ArrowLeft": document.getElementById("prev").click(); break;
    case "ArrowRight": document.getElementById("next").click(); break;
    case "s": case "S": document.getElementById("stop").click(); break;
    case "r": case "R": document.getElementById("repeat").click(); break;
    case "t": case "T": document.getElementById("theme").click(); break;
    case "m": case "M": document.getElementById("muteUnmute").click(); break;
  }
});
</script>
</body>
</html>
